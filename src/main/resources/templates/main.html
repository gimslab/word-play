<!doctype html>
<!--suppress XmlUnboundNsPrefix -->
<html lang="ko">
<head>

<meta charset="utf-8">
<title>Word Play</title>
<style>
    div.top-button-bar {
      font-size: 1.8em;
      text-align: right;
    }
    div.eng{
      font-size:8em
    }
    div.kor{
      font-size:6em
    }
    div.bottom-button-bar {
      text-align: justify;
    }
    div.bottom-button-bar button {
      font-size: 1.8em;
    }

</style>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script>

$( function() {

    function initDisplay(){
      $("div.eng span").hide()
      $(".answer").hide()
      window.setTimeout(showHint, 1000)
    };

    function showHint(){
      $("div.eng span.hint").show()
      window.setTimeout(thinking, 1000)
    };

    var thikingTime = 0;
    function thinking(){
      $("div.eng span.hint").text(
    $("div.eng span.hint").text()+".")
      if(thikingTime++>2)
        showAnswer();
      window.setTimeout(thinking, 1000)
    }

    function showAnswer(){
      $("div.eng span.hint").hide()
      $(".answer").show()
      window.setTimeout(goToNext, 3000)
    };

    function goToNext(){
        if(doGoNext)
            window.location.href="/word-play";
    }

    initDisplay();

} );

var doGoNext = true;

function pauseButtonClicked(){
	if(doGoNext){
		doGoNext = false;
		$("button.pause").text("GO")
	} else {
		doGoNext = true;
		goToNext();
	}
}

function gotItButtonClicked(){
    pauseButtonClicked();
    $("form#gotit").submit();
}

</script>
</head>
<body>
<div class="top-button-bar">
    <span th:unless="${userSignedIn}"><a href="/signIn">SIGN IN</a></span>
    <span th:text="${{userId}}">userId</span>
    <span th:if="${userSignedIn}"><a href="/signOut">SIGN OUT</a></span>
</div>
<div class="eng">
    <span th:text="${{hint}}" class="hint">h</span>
    <span th:text="${{eng}}" class="answer">happy</span>
</div>
<div th:text="${{kor}}" class="kor">행복한</div>
<div class="bottom-button-bar">
	<table width="100%">
		<tr>
			<td style="text-align: left">
				<span>Proficiency: </span>
				<span th:text="${proficiency}">Proficiency: 99</span>
			</td>
			<td style="text-align: right">
				<button class="pause" onclick="pauseButtonClicked()">PAUSE</button>
				<button class="gotit" onclick="gotItButtonClicked()">GOT IT</button>
			</td>
		</tr>
	</table>
</div>
<form id="gotit" method="post"><input type="hidden" name="gotWord" th:value="${eng}"/></form>
</body>
</html>
